# base_centos8_for_pfire.sif
# Generate using:
# sudo singularity build -F base_centos8_for_pfire.sif base_centos8_for_pfire.def

Bootstrap: docker
From: centos:8


# Bind system folders into container folders with writing permissions
# 1) run, exec, shell, and instance start will accept the --bind/-B command-line option to specify bind paths [:dest_in_container[:ro|rw]]
#    -B can be repeated or the paths can be comma separated
# 2) $SINGULARITY_BIND or $SINGULARITY_BINDPATH

   
%post
    
    #### System-wide installations
    
    # change repository stream    
    dnf -y --disablerepo '*' --enablerepo=extras swap centos-linux-repos centos-stream-repos
	dnf -y distro-sync
	
	yum install -y wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
	
    dnf install -y https://download1.rpmfusion.org/free/el/rpmfusion-free-release-8.noarch.rpm
	dnf install -y https://download1.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-8.noarch.rpm

    yum update -y
    dnf install -y 'dnf-command(config-manager)'
    dnf config-manager --set-enabled powertools
    dnf groupinstall -y "Development Tools"
           
    yum install -y  git cmake make automake python3.9 vim yum-utils gcc-toolset-9-gcc-gfortran
    
    alternatives --set python /usr/bin/python3.9
     
    # yum install -y  gcc-toolset-9    tzdata 
    # yum install -y   boost-program-options boost-test boost-filesystem boost-iostreams boost-serialization boost-timer boost-program-options boost-test boost-filesystem boost-iostreams boost-serialization boost-devel 

        
    dnf groupinstall -y "Development Tools"
         
       
%runscript    
